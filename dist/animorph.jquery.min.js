!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],n):n(e.animorph=e.animorph||{},e.jQuery)}(this,function(e,n){"use strict";function t(e){e.parentNode&&e.parentNode.removeChild(e)}function r(e,n){n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e)}function a(e){var n=e.cloneNode(!1);return n.innerHTML=e.innerHTML,n}function o(e,n,t){switch(t){case"appendTo":n.appendChild(e);break;case"prependTo":r(e,n);break;case"insertAfter":e.insertAdjacentElement("afterend",n);break;default:throw new Error("Invalid dom operation")}}function i(e){e.style.transition="none"}function s(e){e.style.transition=""}function m(e){var n=c(e)+v(e);return new Promise(function(t){setTimeout(function(){return t(e)},n)})}function u(e){var n=e.getAttribute&&e.getAttribute("class")||"";return""===n?[]:n.split(" ")}function l(e,n,t){var r=u(e),a=r.indexOf(n),o=a!==-1,i=void 0!==t?t:!o;i!==o&&(i||r.splice(a,1),i&&r.push(n),e.setAttribute("class",r.join(" ")))}function f(e,n){if(void 0===n)throw new Error("Class name is required");l(e,n,!1)}function d(e,n){if(void 0===n)throw new Error("Class name is required");l(e,n,!0)}function p(e){var n={s:1e3,ms:1},t=/([\d\.]+)\s*(\D+)/.exec(e);return t?parseFloat(t[1],10)*n[t[2]]:0}function c(e){return p(window.getComputedStyle(e).transitionDuration)}function v(e){return p(window.getComputedStyle(e).transitionDelay)}function h(e){return new Promise(function(n){n(e.offsetHeight)})}function y(e){return window.HTMLElement?e instanceof window.HTMLElement:e&&"object"===("undefined"==typeof e?"undefined":k(e))&&1===e.nodeType&&e.nodeName}function C(e){var n=e.namespace,t=e.addClasses,r=e.removeClasses,a=e.element,i=e.target,s=e.operation,m=e.animationIndex;return i&&o(a,i,s),b({namespace:n,element:a,addClasses:t,removeClasses:r,animationIndex:m,animationName:"enter"})}function g(e){var n=e.namespace,t=e.element,r=e.addClasses,a=e.removeClasses,o=e.animationIndex;return b({namespace:n,element:t,addClasses:r,removeClasses:a,animationIndex:o,animationName:"leave"})}function w(e){var n=e.namespace,r=e.addClasses,a=e.removeClasses,o=e.element,i=e.target,s=e.operation,m=e.morphParent,u=e.animationIndex;if(o instanceof window.HTMLElement==!1)throw new Error("target is required");var l=A(o),p=I(o,m);return r.forEach(function(e){return d(o,e)}),a.forEach(function(e){return f(o,e)}),Promise.all([C({namespace:n,addClasses:[],removeClasses:[],element:o,target:i,operation:s,animationIndex:u}),T({namespace:n,addClasses:r,removeClasses:a,element:p,target:o,morphParent:m,animationIndex:u}),x({namespace:n,addClasses:[],removeClasses:[],element:l,animationIndex:u})]).then(function(){t(p)})}function x(e){return g(e).then(function(){return t(e.element)})}function T(e){var n=e.namespace,t=e.addClasses,r=e.removeClasses,a=e.element,o=e.target,i=e.morphParent,s=e.animationIndex,m=E(o,i),u=window.getComputedStyle(o),l=m.top-parseFloat(u.marginTop),f=m.left-parseFloat(u.marginLeft);return b({namespace:n,element:a,addClasses:t,removeClasses:r,animationIndex:s,animationName:"move",onAnimationStart:function(){a.style.position="absolute",a.style.left=f+"px",a.style.top=l+"px"}})}function b(e){var n=e.namespace,t=e.addClasses,r=e.removeClasses,a=e.element,o=e.animationName,i=e.animationIndex,s=e.onAnimationStart,u=void 0===s?function(){}:s;return N({namespace:n,element:a,addClasses:t,removeClasses:r,animationName:o,animationIndex:i}).then(u).then(function(){return m(a)}).then(function(){return P({namespace:n,element:a,animationName:o})})}function A(e){var n=a(e);return e.insertAdjacentElement("afterend",n),n}function I(e,n){var t=a(e),r=E(e),o=E(n),i=window.getComputedStyle(e),s=r.top-o.top-parseFloat(i.marginTop),m=r.left-o.left-parseFloat(i.marginLeft);return t.style.position="absolute",t.style.left=m+"px",t.style.top=s+"px",n.appendChild(t),t}function N(e){var n=e.namespace,t=e.element,r=e.addClasses,a=e.removeClasses,o=e.animationIndex,m=e.animationName,u=void 0===m?"enter":m,l=L({element:t,animationIndex:o,animationName:u,namespace:n});return i(t),d(t,n+"-"+u+"-prepare"),d(t,n+"-"+u),d(t,n+"-animate"),new Promise(function(e){setTimeout(e,l)}).then(function(){return h(t).then(function(){h(t),f(t,n+"-"+u+"-prepare"),d(t,n+"-"+u+"-active"),r.forEach(function(e){return d(t,e)}),a.forEach(function(e){return f(t,e)}),s(t)})})}function E(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,t=0,r=0;e&&e!=n&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,r+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{top:r,left:t}}function P(e){var n=e.element,t=e.animationName,r=e.namespace;return i(n),h(n).then(function(){f(n,r+"-animate"),f(n,r+"-"+t),f(n,r+"-"+t+"-active"),s(n)})}function L(e){var n=e.element,t=e.animationIndex,r=e.animationName,a=e.namespace,o=v(n);d(n,a+"-"+r+"-stagger");var i=v(n);return f(n,a+"-"+r+"-stagger"),o===i?0:i*t}function j(e,n){var t=n.namespace,r=void 0===t?"am":t,a=n.addClasses,o=void 0===a?[]:a,i=n.removeClasses,s=void 0===i?[]:i,m=n.target,u=n.operation,l=void 0===u?"appendTo":u,f=n.morphParent,d=void 0===f?document.body:f,p=B[l];if(!p)throw new Error("Invalid operation '"+l+"'");"string"==typeof o&&(o=o.split(/\s*(?:\s|,)\s*/)),"string"==typeof s&&(s=s.split(/\s*(?:\s|,)\s*/));var c=y(e)?[e]:Array.prototype.slice.call(e);return Promise.all(c.map(function(e,n){if(!y(e))throw new Error("Element is required");return p!==w||d.contains(e)||(p=C),p({animationIndex:n,namespace:r,addClasses:o,removeClasses:s,element:e,target:m,operation:l,morphParent:d})}))}function S(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(e,D({target:n},t))}function q(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(e,D({target:n,operation:"prependTo"},t))}function H(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return j(e,D({operation:"remove"},n))}function M(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return j(e,D({operation:"leave"},n))}function F(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(e,D({target:n,operation:"insertAfter"},t))}function O(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"enter",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return j(e,D({addClasses:t,removeClasses:n,operation:r},a))}n="default"in n?n.default:n;var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},B={appendTo:w,prependTo:w,insertBefore:w,insertAfter:w,remove:x,enter:C,leave:g};n.fn.amAppendTo=function(e,t){return S(this.toArray(),n(e)[0],t)},n.fn.amPrependTo=function(e,t){return q(this.toArray(),n(e)[0],t)},n.fn.amRemove=function(e){return H(this.toArray(),e)},n.fn.amLeave=function(e){return M(this.toArray(),e)},n.fn.amInsertAfter=function(e,t){return F(this.toArray(),n(e)[0],t)},n.fn.amReplaceClasses=function(e,n,t,r){return O(this.toArray(),e,n,t,r)},e.animorph=j,e.appendTo=S,e.prependTo=q,e.remove=H,e.leave=M,e.insertAfter=F,e.replaceClasses=O,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=animorph.jquery.min.js.map
