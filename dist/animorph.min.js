!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.animorph=e.animorph||{})}(this,function(e){"use strict";function n(e){e.parentNode&&e.parentNode.removeChild(e)}function t(e,n){n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e)}function a(e){var n=e.cloneNode(!1);return n.innerHTML=e.innerHTML,n}function o(e,n,a){switch(a){case"appendTo":n.appendChild(e);break;case"prependTo":t(e,n);break;case"insertAfter":e.insertAdjacentElement("afterend",n);break;default:throw new Error("Invalid dom operation")}}function r(e){e.style.transition="none"}function i(e){e.style.transition=""}function s(e){if(e===document.body)return{left:0,top:0};if(!e.getClientRects().length)return{top:0,left:0};var n=e.getBoundingClientRect();if(n.width||n.height){var t=document.documentElement;return{top:n.top+window.pageYOffset-t.clientTop,left:n.left+window.pageXOffset-t.clientLeft}}return n}function m(e){var n=c(e)+v(e);return new Promise(function(t){setTimeout(function(){return t(e)},n)})}function l(e){var n=e.getAttribute&&e.getAttribute("class")||"";return""===n?[]:n.split(" ")}function d(e,n,t){var a=l(e),o=a.indexOf(n),r=o!==-1,i=void 0!==t?t:!r;i!==r&&(i||a.splice(o,1),i&&a.push(n),e.setAttribute("class",a.join(" ")))}function u(e,n){if(void 0===n)throw new Error("Class name is required");d(e,n,!1)}function p(e,n){if(void 0===n)throw new Error("Class name is required");d(e,n,!0)}function f(e){var n={s:1e3,ms:1},t=/([\d\.]+)\s*(\D+)/.exec(e);return t?parseFloat(t[1],10)*n[t[2]]:0}function c(e){return f(window.getComputedStyle(e).transitionDuration)}function v(e){return f(window.getComputedStyle(e).transitionDelay)}function h(e){return new Promise(function(n){n(e.offsetHeight)})}function C(e){return window.HTMLElement?e instanceof window.HTMLElement:e&&"object"===("undefined"==typeof e?"undefined":q(e))&&1===e.nodeType&&e.nodeName}function g(e){var n=e.namespace,t=e.addClasses,a=e.removeClasses,r=e.element,i=e.target,s=e.operation,m=e.animationIndex;return i&&o(r,i,s),T({namespace:n,element:r,addClasses:t,removeClasses:a,animationIndex:m,animationName:"enter"})}function y(e){var n=e.namespace,t=e.element,a=e.addClasses,o=e.removeClasses,r=e.animationIndex;return T({namespace:n,element:t,addClasses:a,removeClasses:o,animationIndex:r,animationName:"leave"})}function w(e){var t=e.namespace,a=e.addClasses,o=e.removeClasses,r=e.element,i=e.target,s=e.operation,m=e.morphParent,l=e.animationIndex;if(r instanceof window.HTMLElement==!1)throw new Error("target is required");var d=I(r),f=E(r,m);return a.forEach(function(e){return p(r,e)}),o.forEach(function(e){return u(r,e)}),Promise.all([g({namespace:t,addClasses:[],removeClasses:[],element:r,target:i,operation:s,animationIndex:l}),b({namespace:t,addClasses:a,removeClasses:o,element:f,target:r,morphParent:m,animationIndex:l}),x({namespace:t,addClasses:[],removeClasses:[],element:d,animationIndex:l})]).then(function(){n(f)})}function x(e){return y(e).then(function(){return n(e.element)})}function b(e){var n=e.namespace,t=e.addClasses,a=e.removeClasses,o=e.element,r=e.target,i=e.morphParent,m=e.animationIndex,l=s(r),d=s(i),u=window.getComputedStyle(r),p=l.top-d.top-parseFloat(u.marginTop),f=l.left-d.left-parseFloat(u.marginLeft);return T({namespace:n,element:o,addClasses:t,removeClasses:a,animationIndex:m,animationName:"move",onAnimationStart:function(){o.style.position="absolute",o.style.left=f+"px",o.style.top=p+"px"}})}function T(e){var n=e.namespace,t=e.addClasses,a=e.removeClasses,o=e.element,r=e.animationName,i=e.animationIndex,s=e.onAnimationStart,l=void 0===s?function(){}:s;return N({namespace:n,element:o,addClasses:t,removeClasses:a,animationName:r,animationIndex:i}).then(l).then(function(){return m(o)}).then(function(){return A({namespace:n,element:o,animationName:r})})}function I(e){var n=a(e);return e.insertAdjacentElement("afterend",n),n}function E(e,n){var t=a(e),o=s(e),r=s(n),i=window.getComputedStyle(e),m=o.top-r.top-parseFloat(i.marginTop),l=o.left-r.left-parseFloat(i.marginLeft);return t.style.position="absolute",t.style.left=l+"px",t.style.top=m+"px",n.appendChild(t),t}function N(e){var n=e.namespace,t=e.element,a=e.addClasses,o=e.removeClasses,s=e.animationIndex,m=e.animationName,l=void 0===m?"enter":m,d=P({element:t,animationIndex:s,animationName:l,namespace:n});return r(t),p(t,n+"-"+l+"-prepare"),p(t,n+"-"+l),p(t,n+"-animate"),new Promise(function(e){setTimeout(e,d)}).then(function(){return h(t).then(function(){h(t),u(t,n+"-"+l+"-prepare"),p(t,n+"-"+l+"-active"),a.forEach(function(e){return p(t,e)}),o.forEach(function(e){return u(t,e)}),i(t)})})}function A(e){var n=e.element,t=e.animationName,a=e.namespace;return r(n),h(n).then(function(){u(n,a+"-animate"),u(n,a+"-"+t),u(n,a+"-"+t+"-active"),i(n)})}function P(e){var n=e.element,t=e.animationIndex,a=e.animationName,o=e.namespace,r=v(n);p(n,o+"-"+a+"-stagger");var i=v(n);return u(n,o+"-"+a+"-stagger"),r===i?0:i*t}function S(e,n){var t=n.namespace,a=void 0===t?"am":t,o=n.addClasses,r=void 0===o?[]:o,i=n.removeClasses,s=void 0===i?[]:i,m=n.target,l=n.operation,d=void 0===l?"appendTo":l,u=n.morphParent,p=void 0===u?document.body:u,f=B[d];if(!f)throw new Error("Invalid operation '"+d+"'");"string"==typeof r&&(r=r.split(/\s*(?:\s|,)\s*/)),"string"==typeof s&&(s=s.split(/\s*(?:\s|,)\s*/));var c=C(e)?[e]:Array.prototype.slice.call(e);return Promise.all(c.map(function(e,n){if(!C(e))throw new Error("Element is required");return f!==w||p.contains(e)||(f=g),f({animationIndex:n,namespace:a,addClasses:r,removeClasses:s,element:e,target:m,operation:d,morphParent:p})}))}function j(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S(e,k({target:n},t))}function L(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S(e,k({target:n,operation:"prependTo"},t))}function O(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S(e,k({operation:"remove"},n))}function H(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S(e,k({operation:"leave"},n))}function M(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S(e,k({target:n,operation:"insertAfter"},t))}function F(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"enter",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return S(e,k({addClasses:t,removeClasses:n,operation:a},o))}var q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},B={appendTo:w,prependTo:w,insertBefore:w,insertAfter:w,remove:x,enter:g,leave:y};e.animorph=S,e.appendTo=j,e.prependTo=L,e.remove=O,e.leave=H,e.insertAfter=M,e.replaceClasses=F,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=animorph.min.js.map
