!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("jquery")):"function"==typeof define&&define.amd?define(["exports","jquery"],n):n(e.animorph=e.animorph||{},e.jQuery)}(this,function(e,n){"use strict";function t(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function r(e){e.parentNode&&e.parentNode.removeChild(e)}function a(e,n){n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e)}function o(e){var n=e.cloneNode(!1);return n.innerHTML=e.innerHTML,n}function i(e,n,t){switch(t){case"appendTo":n.appendChild(e);break;case"prependTo":a(e,n);break;case"insertAfter":w(e,n);break;default:throw new Error("Invalid dom operation")}}function s(e){e.style.transition="none"}function m(e){e.style.transition=""}function u(e){if(e===document.body)return{left:0,top:0};if(!e.getClientRects().length)return{top:0,left:0};var n=e.getBoundingClientRect();if(n.width||n.height){var t=document.documentElement;return{top:n.top+window.pageYOffset-t.clientTop,left:n.left+window.pageXOffset-t.clientLeft}}return n}function l(e){var n=C(e),r=h(e),a=n.map(function(e,n){return e+r[n]}),o=Math.max.apply(Math,t(a));return new Promise(function(n){setTimeout(function(){return n(e)},o)})}function f(e){var n=e.getAttribute&&e.getAttribute("class")||"";return""===n?[]:n.split(" ")}function d(e,n,t){var r=f(e),a=r.indexOf(n),o=-1!==a,i=void 0!==t?t:!o;i!==o&&(i||r.splice(a,1),i&&r.push(n),e.setAttribute("class",r.join(" ")))}function p(e,n){if(void 0===n)throw new Error("Class name is required");d(e,n,!1)}function c(e,n){if(void 0===n)throw new Error("Class name is required");d(e,n,!0)}function v(e){var n={s:1e3,ms:1},t=/([.\d]+)\s*(\D+)/.exec(e);return t?parseFloat(t[1],10)*n[t[2]]:0}function C(e){return(window.getComputedStyle(e).transitionDuration||"").split(",").map(function(e){return v(e)})}function h(e){return(window.getComputedStyle(e).transitionDelay||"").split(",").map(function(e){return v(e)})}function g(e){return new Promise(function(n){n(e.offsetHeight)})}function y(e){return window.HTMLElement?e instanceof window.HTMLElement:e&&"object"===(void 0===e?"undefined":Q(e))&&1===e.nodeType&&e.nodeName}function w(e,n){return e.insertAdjacentElement?e.insertAdjacentElement("afterend",n):e.parentNode.insertBefore(n,e.nextSibling)}function x(e){var n=e.namespace,t=e.addClasses,r=e.removeClasses,a=e.element,o=e.elementsCount,s=e.target,m=e.operation,u=e.animationIndex;return s&&i(a,s,m),E({namespace:n,element:a,elementsCount:o,addClasses:t,removeClasses:r,animationIndex:u,animationName:"enter"})}function A(e){return E({namespace:e.namespace,element:e.element,elementsCount:e.elementsCount,addClasses:e.addClasses,removeClasses:e.removeClasses,animationIndex:e.animationIndex,animationName:"leave"})}function b(e){var n=e.namespace,t=e.addClasses,a=e.removeClasses,o=e.element,i=e.elementsCount,s=e.target,m=e.operation,u=e.morphParent,l=e.animationIndex;if(o instanceof window.HTMLElement==!1)throw new Error("target is required");var f=N(o),d=P(o,u);return t.forEach(function(e){return c(o,e)}),a.forEach(function(e){return p(o,e)}),Promise.all([x({namespace:n,addClasses:[],removeClasses:[],element:o,elementsCount:i,target:s,operation:m,animationIndex:l}),I({namespace:n,addClasses:t,removeClasses:a,element:d,elementsCount:i,morphParent:u,target:o,animationIndex:l}),T({namespace:n,addClasses:[],removeClasses:[],element:f,elementsCount:i,animationIndex:l})]).then(function(){r(d)})}function T(e){return A(e).then(function(){return r(e.element)})}function I(e){var n=e.namespace,t=e.addClasses,r=e.removeClasses,a=e.element,o=e.elementsCount,i=e.target,s=e.morphParent,m=e.animationIndex,l=u(i),f=u(s),d=window.getComputedStyle(i),p=l.top-f.top-parseFloat(d.marginTop),c=l.left-f.left-parseFloat(d.marginLeft);return E({namespace:n,element:a,elementsCount:o,addClasses:t,removeClasses:r,animationIndex:m,animationName:"move",onAnimationStart:function(){a.style.position="absolute",a.style.left=c+"px",a.style.top=p+"px"}})}function E(e){var n=e.namespace,t=e.addClasses,r=e.removeClasses,a=e.element,o=e.elementsCount,i=e.animationName,s=e.animationIndex,m=e.onAnimationStart,u=void 0===m?function(){}:m;return j({namespace:n,element:a,elementsCount:o,addClasses:t,removeClasses:r,animationName:i,animationIndex:s}).then(u).then(function(){return l(a)}).then(function(){return L({namespace:n,element:a,animationName:i})})}function N(e){var n=o(e);return w(e,n),n}function P(e,n){var t=o(e),r=u(e),a=u(n),i=window.getComputedStyle(e),s=r.top-a.top-parseFloat(i.marginTop),m=r.left-a.left-parseFloat(i.marginLeft);return t.style.position="absolute",t.style.left=m+"px",t.style.top=s+"px",n.appendChild(t),t}function j(e){var n=e.namespace,t=e.element,r=e.elementsCount,a=e.addClasses,o=e.removeClasses,i=e.animationIndex,u=e.animationName,l=void 0===u?"enter":u,f=S(t),d=0===i?0:q({element:t,animationIndex:i,animationName:l,namespace:n},f);return s(t),c(t,n+"-"+l+"-prepare"),c(t,n+"-"+l),c(t,n+"-animate"),new Promise(function(e){setTimeout(e,d)}).then(function(){return g(t).then(function(){g(t),r===i+1&&delete X[f],p(t,n+"-"+l+"-prepare"),c(t,n+"-"+l+"-active"),a.forEach(function(e){return c(t,e)}),o.forEach(function(e){return p(t,e)}),m(t)})})}function S(e){var n=f(e);return n.sort(),n.join(" ")}function L(e){var n=e.element,t=e.animationName,r=e.namespace;return s(n),g(n).then(function(){p(n,r+"-animate"),p(n,r+"-"+t),p(n,r+"-"+t+"-active"),m(n)})}function M(e){var n=e.element,t=e.animationName,r=e.namespace,a=h(n);c(n,r+"-stagger"),c(n,r+"-"+t+"-stagger");var o=h(n);return p(n,r+"-stagger"),p(n,r+"-"+t+"-stagger"),a[0]===o[0]?0:o[0]}function q(e,n){var t=e.element,r=e.animationIndex,a=e.animationName,o=e.namespace;return X[n]||(X[n]=M({element:t,animationIndex:r,animationName:a,namespace:o})),X[n]*r}function O(e,n){var t=n.namespace,r=void 0===t?"am":t,a=n.addClasses,o=void 0===a?[]:a,i=n.removeClasses,s=void 0===i?[]:i,m=n.target,u=n.operation,l=void 0===u?"appendTo":u,f=n.morphParent,d=void 0===f?document.body:f,p=z[l];if(!p)throw new Error("Invalid operation '"+l+"'");"string"==typeof o&&(o=o.split(/\s*(?:\s|,)\s*/)),"string"==typeof s&&(s=s.split(/\s*(?:\s|,)\s*/));var c=y(e)?[e]:Array.prototype.slice.call(e),v=c.length;return Promise.all(c.map(function(e,n){if(!y(e))throw new Error("Element is required");return p!==b||d.contains(e)||(p=x),p({animationIndex:n,namespace:r,addClasses:o,removeClasses:s,element:e,elementsCount:v,target:m,operation:l,morphParent:d})}))}function H(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O(e,Y({target:n},t))}function F(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O(e,Y({target:n,operation:"prependTo"},t))}function B(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return O(e,Y({operation:"remove"},n))}function R(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return O(e,Y({operation:"enter"},n))}function k(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return O(e,Y({operation:"leave"},n))}function D(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O(e,Y({target:n,operation:"insertAfter"},t))}function _(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"enter",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return O(e,Y({addClasses:t,removeClasses:n,operation:r},a))}n="default"in n?n.default:n;var Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X={},Y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},z={appendTo:b,prependTo:b,insertBefore:b,insertAfter:b,remove:T,enter:x,leave:A};n.fn.amAppendTo=function(e,t){return H(this.toArray(),n(e)[0],t)},n.fn.amPrependTo=function(e,t){return F(this.toArray(),n(e)[0],t)},n.fn.amRemove=function(e){return B(this.toArray(),e)},n.fn.amLeave=function(e){return k(this.toArray(),e)},n.fn.amInsertAfter=function(e,t){return D(this.toArray(),n(e)[0],t)},n.fn.amReplaceClasses=function(e,n,t,r){return _(this.toArray(),e,n,t,r)},e.animorph=O,e.appendTo=H,e.prependTo=F,e.remove=B,e.enter=R,e.leave=k,e.insertAfter=D,e.replaceClasses=_,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=animorph.jquery.min.js.map
