!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.animorph=e.animorph||{})}(this,function(e){"use strict";function n(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function t(e){e.parentNode&&e.parentNode.removeChild(e)}function a(e,n){n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e)}function r(e){var n=e.cloneNode(!1);return n.innerHTML=e.innerHTML,n}function o(e,n,t){switch(t){case"appendTo":n.appendChild(e);break;case"prependTo":a(e,n);break;case"insertAfter":y(e,n);break;default:throw new Error("Invalid dom operation")}}function i(e){e.style.transition="none"}function s(e){e.style.transition=""}function m(e){if(e===document.body)return{left:0,top:0};if(!e.getClientRects().length)return{top:0,left:0};var n=e.getBoundingClientRect();if(n.width||n.height){var t=document.documentElement;return{top:n.top+window.pageYOffset-t.clientTop,left:n.left+window.pageXOffset-t.clientLeft}}return n}function l(e){var t=v(e),a=h(e),r=t.map(function(e,n){return e+a[n]}),o=Math.max.apply(Math,n(r));return new Promise(function(n){setTimeout(function(){return n(e)},o)})}function u(e){var n=e.getAttribute&&e.getAttribute("class")||"";return""===n?[]:n.split(" ")}function p(e,n,t){var a=u(e),r=a.indexOf(n),o=r!==-1,i=void 0!==t?t:!o;i!==o&&(i||a.splice(r,1),i&&a.push(n),e.setAttribute("class",a.join(" ")))}function d(e,n){if(void 0===n)throw new Error("Class name is required");p(e,n,!1)}function f(e,n){if(void 0===n)throw new Error("Class name is required");p(e,n,!0)}function c(e){var n={s:1e3,ms:1},t=/([.\d]+)\s*(\D+)/.exec(e);return t?parseFloat(t[1],10)*n[t[2]]:0}function v(e){return(window.getComputedStyle(e).transitionDuration||"").split(",").map(function(e){return c(e)})}function h(e){return(window.getComputedStyle(e).transitionDelay||"").split(",").map(function(e){return c(e)})}function g(e){return new Promise(function(n){n(e.offsetHeight)})}function C(e){return window.HTMLElement?e instanceof window.HTMLElement:e&&"object"===("undefined"==typeof e?"undefined":R(e))&&1===e.nodeType&&e.nodeName}function y(e,n){return e.insertAdjacentElement?e.insertAdjacentElement("afterend",n):e.parentNode.insertBefore(n,e.nextSibling)}function w(e){var n=e.namespace,t=e.addClasses,a=e.removeClasses,r=e.element,i=e.target,s=e.operation,m=e.animationIndex;return i&&o(r,i,s),E({namespace:n,element:r,addClasses:t,removeClasses:a,animationIndex:m,animationName:"enter"})}function x(e){var n=e.namespace,t=e.element,a=e.addClasses,r=e.removeClasses,o=e.animationIndex;return E({namespace:n,element:t,addClasses:a,removeClasses:r,animationIndex:o,animationName:"leave"})}function b(e){var n=e.namespace,a=e.addClasses,r=e.removeClasses,o=e.element,i=e.target,s=e.operation,m=e.morphParent,l=e.animationIndex;if(o instanceof window.HTMLElement==!1)throw new Error("target is required");var u=N(o),p=A(o,m);return a.forEach(function(e){return f(o,e)}),r.forEach(function(e){return d(o,e)}),Promise.all([w({namespace:n,addClasses:[],removeClasses:[],element:o,target:i,operation:s,animationIndex:l}),T({namespace:n,addClasses:a,removeClasses:r,element:p,morphParent:m,target:o,animationIndex:l}),I({namespace:n,addClasses:[],removeClasses:[],element:u,animationIndex:l})]).then(function(){t(p)})}function I(e){return x(e).then(function(){return t(e.element)})}function T(e){var n=e.namespace,t=e.addClasses,a=e.removeClasses,r=e.element,o=e.target,i=e.morphParent,s=e.animationIndex,l=m(o),u=m(i),p=window.getComputedStyle(o),d=l.top-u.top-parseFloat(p.marginTop),f=l.left-u.left-parseFloat(p.marginLeft);return E({namespace:n,element:r,addClasses:t,removeClasses:a,animationIndex:s,animationName:"move",onAnimationStart:function(){r.style.position="absolute",r.style.left=f+"px",r.style.top=d+"px"}})}function E(e){var n=e.namespace,t=e.addClasses,a=e.removeClasses,r=e.element,o=e.animationName,i=e.animationIndex,s=e.onAnimationStart,m=void 0===s?function(){}:s;return P({namespace:n,element:r,addClasses:t,removeClasses:a,animationName:o,animationIndex:i}).then(m).then(function(){return l(r)}).then(function(){return S({namespace:n,element:r,animationName:o})})}function N(e){var n=r(e);return y(e,n),n}function A(e,n){var t=r(e),a=m(e),o=m(n),i=window.getComputedStyle(e),s=a.top-o.top-parseFloat(i.marginTop),l=a.left-o.left-parseFloat(i.marginLeft);return t.style.position="absolute",t.style.left=l+"px",t.style.top=s+"px",n.appendChild(t),t}function P(e){var n=e.namespace,t=e.element,a=e.addClasses,r=e.removeClasses,o=e.animationIndex,m=e.animationName,l=void 0===m?"enter":m,u=0===o?0:L({element:t,animationIndex:o,animationName:l,namespace:n});return i(t),f(t,n+"-"+l+"-prepare"),f(t,n+"-"+l),f(t,n+"-animate"),new Promise(function(e){setTimeout(e,u)}).then(function(){return g(t).then(function(){g(t),d(t,n+"-"+l+"-prepare"),f(t,n+"-"+l+"-active"),a.forEach(function(e){return f(t,e)}),r.forEach(function(e){return d(t,e)}),s(t)})})}function S(e){var n=e.element,t=e.animationName,a=e.namespace;return i(n),g(n).then(function(){d(n,a+"-animate"),d(n,a+"-"+t),d(n,a+"-"+t+"-active"),s(n)})}function j(e){var n=e.element,t=e.animationName,a=e.namespace,r=h(n);f(n,a+"-stagger"),f(n,a+"-"+t+"-stagger");var o=h(n);return d(n,a+"-stagger"),d(n,a+"-"+t+"-stagger"),r[0]===o[0]?0:o[0]}function L(e){var n=e.element,t=e.animationIndex,a=e.animationName,r=e.namespace,o=u(n);o.sort();var i=o.join(" ");return _[i]||(_[i]=j({element:n,animationIndex:t,animationName:a,namespace:r})),_[i]*t}function M(e,n){var t=n.namespace,a=void 0===t?"am":t,r=n.addClasses,o=void 0===r?[]:r,i=n.removeClasses,s=void 0===i?[]:i,m=n.target,l=n.operation,u=void 0===l?"appendTo":l,p=n.morphParent,d=void 0===p?document.body:p,f=Y[u];if(!f)throw new Error("Invalid operation '"+u+"'");"string"==typeof o&&(o=o.split(/\s*(?:\s|,)\s*/)),"string"==typeof s&&(s=s.split(/\s*(?:\s|,)\s*/));var c=C(e)?[e]:Array.prototype.slice.call(e);return Promise.all(c.map(function(e,n){if(!C(e))throw new Error("Element is required");return f!==b||d.contains(e)||(f=w),f({animationIndex:n,namespace:a,addClasses:o,removeClasses:s,element:e,target:m,operation:u,morphParent:d})}))}function O(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M(e,X({target:n},t))}function H(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M(e,X({target:n,operation:"prependTo"},t))}function F(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M(e,X({operation:"remove"},n))}function q(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M(e,X({operation:"enter"},n))}function B(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M(e,X({operation:"leave"},n))}function k(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M(e,X({target:n,operation:"insertAfter"},t))}function D(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"enter",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return M(e,X({addClasses:t,removeClasses:n,operation:a},r))}var R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_={},X=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Y={appendTo:b,prependTo:b,insertBefore:b,insertAfter:b,remove:I,enter:w,leave:x};e.animorph=M,e.appendTo=O,e.prependTo=H,e.remove=F,e.enter=q,e.leave=B,e.insertAfter=k,e.replaceClasses=D,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=animorph.min.js.map
