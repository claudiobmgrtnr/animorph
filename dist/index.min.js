!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.animorph=e.animorph||{})}(this,function(e){"use strict";function n(e){e.parentNode&&e.parentNode.removeChild(e)}function t(e,n){n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e)}function r(e){var n=e.cloneNode(!1);return n.innerHTML=e.innerHTML,n}function a(e,n,r){switch(r){case"appendTo":n.appendChild(e);break;case"prependTo":t(e,n);break;case"insertAfter":e.insertAdjacentElement("afterend",n);break;default:throw new Error("Invalid dom operation")}}function o(e){e.style.transition="none"}function s(e){e.style.transition=""}function i(e){var n=p(e);return new Promise(function(t){setTimeout(function(){return t(e)},n)})}function l(e){var n=e.getAttribute&&e.getAttribute("class")||"";return""===n?[]:n.split(" ")}function m(e,n,t){var r=l(e),a=r.indexOf(n),o=a!==-1,s=void 0!==t?t:!o;s!==o&&(s||r.splice(a,1),s&&r.push(n),e.setAttribute("class",r.join(" ")))}function d(e,n){if(void 0===n)throw new Error("Class name is required");m(e,n,!1)}function u(e,n){if(void 0===n)throw new Error("Class name is required");m(e,n,!0)}function c(e){var n={s:1e3,ms:1},t=/([\d\.]+)\s*(\D+)/.exec(e);return t?parseFloat(t[1],10)*n[t[2]]:0}function p(e){var n=c(window.getComputedStyle(e).transitionDuration),t=c(window.getComputedStyle(e).transitionDelay);return n+t}function f(){return new Promise(function(e){return O(e)})}function v(e){var n=e.namespace,t=e.addClasses,r=e.removeClasses,o=e.element,s=e.target,i=e.operation;return s&&a(o,s,i),b({namespace:n,element:o,addClasses:t,removeClasses:r,animationName:"enter"})}function C(e){var n=e.namespace,t=e.element,r=e.addClasses,a=e.removeClasses;return b({namespace:n,element:t,addClasses:r,removeClasses:a,animationName:"leave"})}function h(e){var t=e.namespace,r=e.addClasses,a=e.removeClasses,o=e.element,s=e.target,i=e.operation,l=e.morphParent;if(o instanceof window.HTMLElement==!1)throw new Error("target is required");var m=y(o),d=A(o,l);return Promise.all([v({namespace:t,addClasses:r,removeClasses:a,element:o,target:s,operation:i}),g({namespace:t,addClasses:r,removeClasses:a,element:d,morphParent:l,target:o}),C({namespace:t,addClasses:[],removeClasses:[],element:m})]).then(function(){n(m),n(d)})}function w(e){return C(e).then(function(){return n(e.element)})}function g(e){var n=e.namespace,t=e.addClasses,r=e.removeClasses,a=e.element,o=e.target,s=e.morphParent,i=E(o),l=E(s),m=i.top-l.top,d=i.left-l.left;return b({namespace:n,element:a,addClasses:t,removeClasses:r,animationName:"move",onAnimationStart:function(){a.setAttribute("style","position: absolute; top: "+m+"; left: "+d+";")}})}function b(e){var n=e.namespace,t=e.addClasses,r=e.removeClasses,a=e.element,o=e.animationName,s=e.onAnimationStart,l=void 0===s?function(){}:s;return T({namespace:n,element:a,addClasses:t,removeClasses:r,animationName:o}).then(l).then(function(){return i(a)}).then(function(){return N({namespace:n,element:a,animationName:o})})}function y(e){var n=r(e);return e.insertAdjacentElement("afterend",n),n}function A(e,n){var t=r(e),a=E(e),o=E(n),s=a.top-o.top,i=a.left-o.left;return t.setAttribute("style","position: absolute; top: "+s+"; left: "+i+";"),document.body.insertAdjacentElement("afterend",t),t}function T(e){var n=e.namespace,t=e.element,r=e.addClasses,a=e.removeClasses,i=e.animationName,l=void 0===i?"enter":i;return o(t),u(t,n+"-"+l+"-prepare"),u(t,n+"-"+l),u(t,n+"-animate"),f().then(function(){d(t,n+"-"+l+"-prepare"),u(t,n+"-"+l+"-active"),r.forEach(function(e){return u(t,e)}),a.forEach(function(e){return d(t,e)}),s(t)})}function E(e){var n=e.getBoundingClientRect(),t={top:n.top+document.body.scrollTop,left:n.left+document.body.scrollLeft};return t}function N(e){var n=e.element,t=e.animationName,r=e.namespace;return o(n),f().then(function(){d(n,r+"-animate"),d(n,r+"-"+t),d(n,r+"-"+t+"-active"),s(n)})}function P(e,n){var t=n.namespace,r=void 0===t?"am":t,a=n.addClasses,o=void 0===a?[]:a,s=n.removeClasses,i=void 0===s?[]:s,l=n.target,m=n.operation,d=void 0===m?"appendTo":m,u=n.morphParent,c=void 0===u?document.body:u,p=S[d];if(!p)throw new Error("Invalid operation '"+d+"'");if(e instanceof window.HTMLElement==!1)throw new Error("Element is required");return p!==h||e.parentNode||(p=v),p({namespace:r,addClasses:o,removeClasses:i,element:e,target:l,operation:d,morphParent:c})}function j(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P(e,H({target:n},t))}function q(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P(e,H({target:n,operation:"prependTo"},t))}function x(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return P(e,H({operation:"remove"},n))}function L(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P(e,H({target:n,operation:"insertAfter"},t))}function M(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"enter",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return P(e,H({addClasses:t,removeClasses:n,operation:r},a))}var O=window.requestAnimationFrame||setTimeout,H=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},S={appendTo:h,prependTo:h,insertBefore:h,insertAfter:h,remove:w,enter:v,leave:C};e.animorph=P,e.appendTo=j,e.prependTo=q,e.remove=x,e.insertAfter=L,e.replaceClasses=M,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
