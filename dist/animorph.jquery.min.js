!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],n):n(e.jQuery)}(this,function(e){"use strict";function n(e){e.parentNode&&e.parentNode.removeChild(e)}function t(e,n){n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e)}function a(e){var n=e.cloneNode(!1);return n.innerHTML=e.innerHTML,n}function r(e,n,a){switch(a){case"appendTo":n.appendChild(e);break;case"prependTo":t(e,n);break;case"insertAfter":e.insertAdjacentElement("afterend",n);break;default:throw new Error("Invalid dom operation")}}function o(e){e.style.transition="none"}function i(e){e.style.transition=""}function s(e){var n=f(e)+p(e);return new Promise(function(t){setTimeout(function(){return t(e)},n)})}function m(e){var n=e.getAttribute&&e.getAttribute("class")||"";return""===n?[]:n.split(" ")}function u(e,n,t){var a=m(e),r=a.indexOf(n),o=r!==-1,i=void 0!==t?t:!o;i!==o&&(i||a.splice(r,1),i&&a.push(n),e.setAttribute("class",a.join(" ")))}function l(e,n){if(void 0===n)throw new Error("Class name is required");u(e,n,!1)}function d(e,n){if(void 0===n)throw new Error("Class name is required");u(e,n,!0)}function c(e){var n={s:1e3,ms:1},t=/([\d\.]+)\s*(\D+)/.exec(e);return t?parseFloat(t[1],10)*n[t[2]]:0}function f(e){return c(window.getComputedStyle(e).transitionDuration)}function p(e){return c(window.getComputedStyle(e).transitionDelay)}function v(e){e.offsetHeight}function h(){return new Promise(function(e){return k(e)})}function C(e){var n=e.namespace,t=e.addClasses,a=e.removeClasses,o=e.element,i=e.target,s=e.operation,m=e.animationIndex;return i&&r(o,i,s),A({namespace:n,element:o,addClasses:t,removeClasses:a,animationIndex:m,animationName:"enter"})}function g(e){var n=e.namespace,t=e.element,a=e.addClasses,r=e.removeClasses,o=e.animationIndex;return A({namespace:n,element:t,addClasses:a,removeClasses:r,animationIndex:o,animationName:"leave"})}function y(e){var t=e.namespace,a=e.addClasses,r=e.removeClasses,o=e.element,i=e.target,s=e.operation,m=e.morphParent,u=e.animationIndex;if(o instanceof window.HTMLElement==!1)throw new Error("target is required");var l=I(o),d=T(o,m);return Promise.all([C({namespace:t,addClasses:a,removeClasses:r,element:o,target:i,operation:s,animationIndex:u}),x({namespace:t,addClasses:a,removeClasses:r,element:d,morphParent:m,target:o,animationIndex:u}),w({namespace:t,addClasses:[],removeClasses:[],element:l,animationIndex:u})]).then(function(){n(d)})}function w(e){return g(e).then(function(){return n(e.element)})}function x(e){var n=e.namespace,t=e.addClasses,a=e.removeClasses,r=e.element,o=e.target,i=e.morphParent,s=e.animationIndex,m=E(o),u=E(i),l=m.top-u.top,d=m.left-u.left;return A({namespace:n,element:r,addClasses:t,removeClasses:a,animationIndex:s,animationName:"move",onAnimationStart:function(){r.style.position="absolute",r.style.left=d+"px",r.style.top=l+"px"}})}function A(e){var n=e.namespace,t=e.addClasses,a=e.removeClasses,r=e.element,o=e.animationName,i=e.animationIndex,m=e.onAnimationStart,u=void 0===m?function(){}:m;return b({namespace:n,element:r,addClasses:t,removeClasses:a,animationName:o,animationIndex:i}).then(u).then(function(){return s(r)}).then(function(){return N({namespace:n,element:r,animationName:o})})}function I(e){var n=a(e);return e.insertAdjacentElement("afterend",n),n}function T(e,n){var t=a(e),r=E(e),o=E(n),i=r.top-o.top,s=r.left-o.left;return t.style.position="absolute",t.style.left=s+"px",t.style.top=i+"px",document.body.insertAdjacentElement("afterend",t),t}function b(e){var n=e.namespace,t=e.element,a=e.addClasses,r=e.removeClasses,s=e.animationIndex,m=e.animationName,u=void 0===m?"enter":m,c=P({element:t,animationIndex:s,animationName:u,namespace:n});return o(t),d(t,n+"-"+u+"-prepare"),d(t,n+"-"+u),d(t,n+"-animate"),new Promise(function(e){setTimeout(e,c)}).then(function(){return h().then(function(){v(t),l(t,n+"-"+u+"-prepare"),d(t,n+"-"+u+"-active"),a.forEach(function(e){return d(t,e)}),r.forEach(function(e){return l(t,e)}),i(t)})})}function E(e){var n=e.getBoundingClientRect(),t={top:n.top+document.body.scrollTop,left:n.left+document.body.scrollLeft};return t}function N(e){var n=e.element,t=e.animationName,a=e.namespace;return o(n),h().then(function(){l(n,a+"-animate"),l(n,a+"-"+t),l(n,a+"-"+t+"-active"),i(n)})}function P(e){var n=e.element,t=e.animationIndex,a=e.animationName,r=e.namespace,o=p(n);d(n,r+"-"+a+"-stagger");var i=p(n);return l(n,r+"-"+a+"-stagger"),o===i?0:i*t}function j(e,n){var t=n.namespace,a=void 0===t?"am":t,r=n.addClasses,o=void 0===r?[]:r,i=n.removeClasses,s=void 0===i?[]:i,m=n.target,u=n.operation,l=void 0===u?"appendTo":u,d=n.morphParent,c=void 0===d?document.body:d,f=D[l];if(!f)throw new Error("Invalid operation '"+l+"'");"string"==typeof o&&(o=o.split(/\s*(?:\s|,)\s*/)),"string"==typeof s&&(s=s.split(/\s*(?:\s|,)\s*/));var p=e instanceof window.HTMLElement?[e]:Array.prototype.slice.call(e);return Promise.all(p.map(function(e,n){if(e instanceof window.HTMLElement==!1)throw new Error("Element is required");return f!==y||c.contains(e)||(f=C),f({animationIndex:n,namespace:a,addClasses:o,removeClasses:s,element:e,target:m,operation:l,morphParent:c})}))}function q(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(e,B({target:n},t))}function L(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(e,B({target:n,operation:"prependTo"},t))}function H(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return j(e,B({operation:"remove"},n))}function M(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return j(e,B({operation:"leave"},n))}function O(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(e,B({target:n,operation:"insertAfter"},t))}function S(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"enter",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return j(e,B({addClasses:t,removeClasses:n,operation:a},r))}e="default"in e?e.default:e;var k=window.requestAnimationFrame||setTimeout,B=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},D={appendTo:y,prependTo:y,insertBefore:y,insertAfter:y,remove:w,enter:C,leave:g};e.fn.amAppendTo=function(n,t){return q(this.toArray(),e(n)[0],t)},e.fn.amPrependTo=function(n,t){return L(this.toArray(),e(n)[0],t)},e.fn.amRemove=function(e){return H(this.toArray(),e)},e.fn.amLeave=function(e){return M(this.toArray(),e)},e.fn.amInsertAfter=function(n,t){return O(this.toArray(),e(n)[0],t)},e.fn.amReplaceClasses=function(e,n,t,a){return S(this.toArray(),e,n,t,a)}});
//# sourceMappingURL=animorph.jquery.min.js.map
